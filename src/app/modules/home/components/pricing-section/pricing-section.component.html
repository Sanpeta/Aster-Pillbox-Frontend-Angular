<section id="plans" class="pricing-section" aria-labelledby="pricing-title">
	<div class="pricing-container">
		<!-- Header da seção -->
		<header class="pricing-header">
			<span class="pricing-badge">PLANOS & PREÇOS</span>
			<h2 id="pricing-title" class="pricing-title">
				Escolha o plano ideal para sua saúde
			</h2>
			<p class="pricing-description">
				Invista no seu bem-estar e tranquilidade. Nossos planos foram
				desenvolvidos para atender suas necessidades específicas.
			</p>
		</header>

		<!-- Banner de economia -->
		<div
			*ngIf="savingsBadgeVisible"
			class="savings-banner"
			role="alert"
			aria-live="polite"
		>
			<button
				(click)="dismissSavingsBadge()"
				class="savings-banner-close"
				aria-label="Fechar banner de oferta"
				type="button"
			>
				<svg
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					viewBox="0 0 24 24"
					aria-hidden="true"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M6 18L18 6M6 6l12 12"
					/>
				</svg>
			</button>
			<div class="savings-banner-content">
				<svg
					class="savings-banner-icon"
					fill="currentColor"
					viewBox="0 0 20 20"
					aria-hidden="true"
				>
					<path
						fill-rule="evenodd"
						d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
						clip-rule="evenodd"
					/>
				</svg>
				<span class="savings-banner-text">
					Oferta por tempo limitado: Economize até 44% no plano anual!
				</span>
			</div>
		</div>

		<!-- Grid de planos -->
		<div
			class="pricing-grid"
			[@staggerAnimation]
			role="list"
			aria-label="Planos disponíveis"
		>
			<article
				*ngFor="let plan of plans; index as i; trackBy: trackByPlan"
				class="plan-card"
				[class.popular]="plan.popular"
				[class.not-popular]="!plan.popular"
				[class.shake]="hoverStates[i]"
				[@fadeInUp]
				(mouseenter)="hoverCard(i)"
				role="listitem"
				[attr.aria-label]="plan.ariaLabel"
			>
				<!-- Header do card -->
				<header class="plan-header" [ngClass]="plan.color">
					<div *ngIf="plan.tag" class="plan-tag">
						<div class="plan-tag-badge" [ngClass]="plan.tagColor">
							<svg
								*ngIf="plan.popular"
								class="plan-tag-icon"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
								aria-hidden="true"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M5 13l4 4L19 7"
								/>
							</svg>
							<svg
								*ngIf="i === 2"
								class="plan-tag-icon"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
								aria-hidden="true"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
								/>
							</svg>
							{{ plan.tag }}
						</div>
					</div>

					<div>
						<h3 class="plan-name">{{ plan.name }}</h3>
						<div class="plan-price-container">
							<span class="plan-price">{{ plan.price }}</span>
							<span class="plan-period">{{ plan.period }}</span>
						</div>

						<div
							*ngIf="plan.originalPrice"
							class="plan-original-price"
						>
							<span class="plan-original-price-text">{{
								plan.originalPrice
							}}</span>
							<span *ngIf="plan.discount" class="plan-discount">
								{{ plan.discount }}
							</span>
						</div>
					</div>
				</header>

				<!-- Corpo do card -->
				<div class="plan-body">
					<div class="plan-features-label">O que está incluído:</div>

					<ul class="plan-features-list" role="list">
						<li
							*ngFor="let feature of plan.features"
							class="plan-feature-item"
							role="listitem"
						>
							<div class="plan-feature-icon included">
								<svg
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									aria-hidden="true"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M5 13l4 4L19 7"
									/>
								</svg>
							</div>
							<span class="plan-feature-text included">{{
								feature
							}}</span>
						</li>
					</ul>

					<!-- Limitações (apenas para plano gratuito) -->
					<div
						*ngIf="i === 0 && plan.limitedFeatures"
						class="plan-limitations"
					>
						<div class="plan-limitations-label">Limitações:</div>
						<ul class="plan-features-list" role="list">
							<li
								*ngFor="let limitation of plan.limitedFeatures"
								class="plan-feature-item"
								role="listitem"
							>
								<div class="plan-feature-icon limited">
									<svg
										fill="none"
										stroke="currentColor"
										viewBox="0 0 24 24"
										aria-hidden="true"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M6 18L18 6M6 6l12 12"
										/>
									</svg>
								</div>
								<span class="plan-feature-text limited">{{
									limitation
								}}</span>
							</li>
						</ul>
					</div>
				</div>

				<!-- Footer do card -->
				<footer class="plan-footer">
					<button
						(click)="selectPlan(i)"
						(mouseenter)="startShake(i)"
						class="plan-button"
						[ngClass]="{
							popular: plan.popular,
							premium: i === 2,
							free: i === 0,
							pulse: plan.popular && !hoverStates[i],
							shadow: plan.popular
						}"
						type="button"
						[attr.aria-label]="'Selecionar ' + plan.name"
					>
						{{ plan.buttonText }}
						<span *ngIf="i === 1" class="plan-button-subtitle">
							Sem compromisso. Cancele quando quiser.
						</span>
						<span *ngIf="i === 2" class="plan-button-subtitle">
							Menos de R$8,33 por mês
						</span>
					</button>
				</footer>
			</article>
		</div>

		<!-- Garantia de satisfação -->
		<div class="satisfaction-guarantee">
			<div class="guarantee-content">
				<div class="guarantee-icon-container">
					<svg
						class="guarantee-icon"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
						aria-hidden="true"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
						/>
					</svg>
				</div>
				<div class="guarantee-text">
					<h3>Garantia de satisfação de 30 dias</h3>
					<p>
						Se você não estiver completamente satisfeito com sua
						assinatura dentro de 30 dias, nós devolveremos 100% do
						seu dinheiro. Sem perguntas, sem complicações.
					</p>
				</div>
			</div>
		</div>

		<!-- Grid de funcionalidades em destaque -->
		<div class="features-grid">
			<div
				*ngFor="let feature of features; trackBy: trackByFeature"
				class="feature-card"
			>
				<div class="feature-content">
					<div class="feature-icon-container">
						<svg
							class="feature-icon"
							fill="none"
							stroke="currentColor"
							viewBox="0 0 24 24"
							aria-hidden="true"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								[attr.d]="getIconPath(feature.icon)"
							/>
						</svg>
					</div>
					<div class="feature-text">
						<h4>{{ feature.title }}</h4>
						<p>{{ feature.description }}</p>
					</div>
				</div>
			</div>
		</div>

		<!-- FAQ -->
		<section class="faq-section" aria-labelledby="faq-title">
			<h3 id="faq-title" class="faq-title">Perguntas Frequentes</h3>
			<div class="faq-list" role="list">
				<div
					*ngFor="let item of faq; index as i; trackBy: trackByFAQ"
					class="faq-item"
					role="listitem"
				>
					<button
						(click)="toggleFAQ(i)"
						class="faq-question"
						type="button"
						[attr.aria-expanded]="item.expanded"
						[attr.aria-controls]="'faq-answer-' + i"
						[attr.id]="'faq-question-' + i"
					>
						<span>{{ item.question }}</span>
						<svg
							class="faq-icon"
							[class.expanded]="item.expanded"
							fill="none"
							stroke="currentColor"
							viewBox="0 0 24 24"
							aria-hidden="true"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M19 9l-7 7-7-7"
							/>
						</svg>
					</button>
					<div
						*ngIf="item.expanded"
						class="faq-answer"
						[attr.id]="'faq-answer-' + i"
						[attr.aria-labelledby]="'faq-question-' + i"
						role="region"
					>
						<p>{{ item.answer }}</p>
					</div>
				</div>
			</div>
		</section>

		<!-- CTA Final -->
		<div class="final-cta">
			<button
				(click)="selectPlan(1)"
				class="final-cta-button"
				type="button"
				aria-label="Começar teste gratuito do plano premium"
			>
				<span>Começar agora grátis</span>
				<svg
					class="final-cta-icon"
					fill="none"
					stroke="currentColor"
					viewBox="0 0 24 24"
					aria-hidden="true"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M14 5l7 7m0 0l-7 7m7-7H3"
					/>
				</svg>
			</button>
		</div>
	</div>
</section>
