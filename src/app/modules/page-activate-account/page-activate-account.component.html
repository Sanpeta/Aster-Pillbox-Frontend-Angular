<div class="activate-page">
	<!-- Loader -->
	<app-loader [isLoading]="isLoading"></app-loader>

	<div class="activate-container">
		<!-- Status Icon -->
		<div class="status-icon-wrapper" [class]="currentState.type">
			<div class="status-icon" [innerHTML]="currentState.icon"></div>
			<div
				class="status-ring"
				*ngIf="currentState.type === 'loading'"
			></div>
		</div>

		<!-- Content -->
		<div class="content-section">
			<h1 class="title">{{ currentState.title }}</h1>
			<p class="description">{{ currentState.description }}</p>
		</div>

		<!-- Progress Steps (only during loading) -->
		<div class="progress-steps" *ngIf="currentState.type === 'loading'">
			<div class="step-item active">
				<div class="step-number">1</div>
				<span>Validando token</span>
			</div>
			<div class="step-divider"></div>
			<div class="step-item" [class.active]="activationProgress >= 2">
				<div class="step-number">2</div>
				<span>Ativando conta</span>
			</div>
			<div class="step-divider"></div>
			<div class="step-item" [class.active]="activationProgress >= 3">
				<div class="step-number">3</div>
				<span>Concluído</span>
			</div>
		</div>

		<!-- Action Buttons -->
		<div class="action-buttons">
			<!-- Login Button -->
			<a
				*ngIf="currentState.showLoginButton"
				routerLink="/login"
				class="btn btn-primary"
			>
				<svg
					class="btn-icon"
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"
					/>
				</svg>
				Fazer Login
			</a>

			<!-- Resend Email Button -->
			<button
				*ngIf="currentState.showResendButton"
				(click)="resendEmail()"
				class="btn btn-secondary"
				[disabled]="isLoading"
			>
				<svg
					class="btn-icon"
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
					/>
				</svg>
				Reenviar Email de Ativação
			</button>

			<!-- Close Button (for mobile) -->
			<button
				*ngIf="currentState.showCloseButton"
				(click)="closePage()"
				class="btn btn-primary"
			>
				<svg
					class="btn-icon"
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M5 13l4 4L19 7"
					/>
				</svg>
				OK
			</button>

			<!-- Support Link -->
			<a
				*ngIf="currentState.type === 'error'"
				routerLink="/support"
				class="support-link"
			>
				Contatar Suporte
				<svg
					class="link-arrow"
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M17 8l4 4m0 0l-4 4m4-4H3"
					/>
				</svg>
			</a>
		</div>

		<!-- Success Celebration -->
		<div class="celebration" *ngIf="currentState.type === 'success'">
			<div class="confetti confetti-1"></div>
			<div class="confetti confetti-2"></div>
			<div class="confetti confetti-3"></div>
			<div class="confetti confetti-4"></div>
		</div>
	</div>
</div>
